---
import { getCollection } from "astro:content";
import ProjectLayout from "../../layouts/ProjectLayout.astro";
import { Image } from "astro:assets";
import { fade } from "astro:transitions";

export async function getStaticPaths() {
  const projectEntries = await getCollection("projects");

  return projectEntries.map((entry) => ({
    params: { project: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<ProjectLayout title={entry.data.title}>
  <main
    class="w-full h-full flex flex-col items-center justify-center bg-slate-950 border border-slate-800 px-3"
    transition:name={entry.data.title + " background"}
  >
    <div
      class="max-w-xl w-full flex flex-col py-10 gap-y-3 overflow-y-scroll overflow-x-clip no-scrollbar"
    >
      <section class="flex flex-col gap-y-2 items-center">
        {
          entry.data.headerImage ? (
            <Image
              height={54}
              src={entry.data.headerImage}
              alt="review summarizer 9000"
              transition:name={entry.data.title}
            />
          ) : (
            <h3 class="text-6xl font-bold" transition:name={entry.data.title}>
              {entry.data.title}
            </h3>
          )
        }
        <p
          class="text-xl text-balance max-w-md text-center"
          transition:name={entry.data.title + " summary"}
        >
          {entry.data.summary}
        </p>
      </section>

      <section
        transition:animate={fade({ duration: "1s" })}
        class="flex flex-col gap-2 w-full items-start"
      >
        <Content />
      </section>
    </div>
  </main>
</ProjectLayout>
